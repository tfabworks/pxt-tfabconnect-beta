# TFabConnect(beta version) 

![tfabconnect top](https://tfabworks.com/wp-content/uploads/tfabconnect-pct-768x590.jpg)

## 概要

- micro:bitのセンサーの値をインターネット上に時間情報と共に蓄積する事が出来ます
- 蓄積したデータを時系列のグラフにする事が出来ます
- グラフを出先からスマホで確認する事が出来ます
- 遠隔地に設置したmicro:bit同士で通信を行う事が出来ます
- IoT体験授業で使われる事を想定した設計をしています
    - 先生の事前準備不要：追加でWi-Fiアクセスポイントを用意する必要はありません
    - 追加コスト不要：追加でWi-Fi接続用周辺機器を購入する必要はありません

## 仕組み

- MakeCode側でTFabConnect専用ブロックを使い「クラウド変数」に対して読み書きを行います
![tfabconnect_blocks](https://beta.tfabconnect.com/img/contrivance_block.png)
- 読み書きの指示は、WebUSBを通じてダッシュボードがクラウド上のデータベースとやりとりを行います
![tfabconnect_daiagram](https://beta.tfabconnect.com/img/contrivance_figure_beta.png)

## 用意する物

- micro:bit 
- USBケーブル
- PC(WebUSBが使えるChromeブラウザが使える事)

## 使い方

### センサーの値をクラウド上に蓄積してブラウザで時系列変化のグラフを描く

1. クラウド変数に書き込むプログラムを作ってmicro:bitにダらウンロード
    1. http://tfab.jp/connect-b にアクセスをし編集をクリック
    1. クラウド変数xに明るさの値を書き込む
    1. micro:bitにダウンロード
1. ダッシュボードにアクセスして micro:bitからの書き込みをクラウド上のデータベースに接続して蓄積開始
    1. https://beta.tfabconnect.com/dashboard/ にアクセス
    1. 初めての場合は規約を読みとりあえず「一時利用」を選択
    1. 左上のmicro:bitのイラストの下にあるグループ選択を「無名のグループ」にしてコンセントのアイコンをクリック
1. 時系列グラフの参照
    1. クラウド変数一覧の「x」のグラフアイコンをクリック
    1. グラフ下の自動更新をクリックし、micro:bitの明るさとグラフが連動する事を確認

### 描いたグラフを出先から参照出来らるようにする

1. 「無名のグループ」の「設定」を開き「グラフ公開」を許可にする
1. クラウド変数一覧の「x」のグラフアイコンをクリック
1. 「グラフの公開」をクリック
1. スマートフォンでQRコードを読み込み、URLを開く

### 離れたmicro:bit 同士で通信を行う

同じグループに参加すると同じ変数に読み書きを行えるようになります。

1. グループを作る
    1. ダッシュボードにアクセス
    1. 左メニューの「＋」マークをクリック
    1. 新しいグループを作成します
1. グループに招待する
    1. 作成したグループの「メンバー」をクリック
    1. 「メンバー追加」をクリック
    1. ワンタイムグループトークン（６桁の数字）が表示されるのでメモをします
1. グループに参加する
    1. 左メニューの「＋」マークをクリック
    1. 「グループへ参加」をクリック
    1. メモをしたワンタイムグループトークンを入力します
1. プログラムを作る
    1. あとは、お互いで同じクラウド変数名に対して読み書きを行うプログラムを作成。
1. micro:bitをグループ接続する
    1. 左上のmicro:bitのイラストの下にあるグループ選択を作成したグループ名にしてコンセントのアイコンをクリック
    
## 関連リンク

TFabConnect β トップページ：https://beta.tfabconnect.com/



